# JS Engine
- NodeJS의 V8엔진은 **Memory Heap**과 **Call Stack**으로 구성되어 있다.
- 자바스크립트는 싱글스레드 프로그래밍 언어인데, 이 의미는 **Call Stack**이 하나라는 이야기이다.
  - **Memory Heap** : 메모리 할당이 일어나는 곳
    - 프로그램에 선언한 변수, 함수 등이 담겨져 있다.
  - **Call Stack** : 코드가 실행될 때 쌓이는 곳. stack 형태로 쌓인다.

# Web API
- 브라우저에서 제공하는 API로 , **DOM**, **Ajax**, **Timeout** 등이 있다.
- Call Stack에서 실행된 비동기 함수는 **Web API**를 호출하고, Web API는 콜백함수를 **Callback Queue**에 밀어 넣는다.

# Callback Queue
- ***비동기적으로 실행된 콜백함수가 보관***되는 영역이다.
- setTimeout에서 타이머 완료 후 실행되는 함수나, addEventListener에서 이벤트가 발생했을 때 실행되는 함수 등이 보관된다.
  - **Queue** : 자료 구조 중 하나,  선입선출(FIFO, First Input First Output)

# Event Loop
- 시간의 흐름에 따라 코드의 수행을 처리하며 그 때마다 JS엔진을 작동시킨다.
- 호출 스택과 콜백큐를 감시하는 단순한 임무만 갖고 있다.
- 호출스택이 비어있으면 큐에서 첫 번째 이벤트를 가져다가 호출 스택에 밀어 넣을 것이며 결과적으로 해당 이벤트가 실행된다.
- 이러한 반복을 틱(tick)이라고 부른다.

## 실행원리
```javascript
  console.log('hi');
  setTimeout(function cb1{
    console.log('ch1');
  }, 5000);
  console.log('Bye');
```
### 위의 코드를 실행했을 때 
1. 브라우저 콘솔, 호출 스택 모두 비어있는 상태이다.
2. `console.log('hi')`가 호출스택에 추가된다.
3. `console.log('hi')`가 실행되고 console에 보여진다.
4. `console.log('hi')`가 호출스택에서 제거된다.
5. `setTimeout(() => console.log('ch1'), 5000)`이 호출스택에 추가된다.
6. `setTimeout(() => console.log('ch1'), 5000)`이 실행되며 브라우저가 web API의 일환인 타이머를 생성하고 카운트다운을 처리한다.
7. `setTimeout(() => console.log('ch1'), 5000)`이 완료되고 호출스택에서 제거된다.
8. `console.log('Bye')`가 호출스택에 추가된다.
9. `console.log('Bye')`가 실행되고 console에 보여진다.
10. `console.log('Bye')`가 호출스택에서 제거된다.
11. 최소 5000ms가 지난 다음에 타이머가 완료되고 콜백함수 `cb1`을 콜백큐에 밀어넣는다.
12. 이벤트 루프는 콜백큐에 있던 `cb1`을 비어있는 호출스택에 밀어넣는다.
13. `cb1`이 실행되고 `console.log('ch1')`가 호출스택에 추가된다.
14. `console.log('ch1')`가 실행되고 console에 보여진다.
15. `console.log('ch1')`가 호출스택에서 제거된다.
16. `cb1`이 호출스택에서 제거된다.




