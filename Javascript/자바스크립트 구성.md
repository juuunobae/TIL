# 자바스크립트 엔진
- 구글의 V8엔진이 있고 크롬과 nodejs에서 사용된다.
### 메모리힙(Memory Heap)
- 메모리 할당이 이루어지는 곳이다.
### 콜스택(Call Stack)
- 코드가 실행되면서 스택 프레임이 쌓이는 곳이다.

# 런타임
- 브라우저에는 거의 모든 자바스크립트 개발자가 사용하는 API(예> setTimeout)가 있지만 엔진이 제공하는 것은 아니다.
![런타임](https://github.com/juuunobae/TIL/blob/main/Javascript/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-03-22%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%201.35.43.png)
- 엔진만으로 모든 것이 이루어지는 것은 아니다. 브라우저가 제공하는 web API라는 것도 있어서 DOM, AJAX, setTimeout등이 여기에 포함된다.
- 이벤트루프와 콜백큐도 자기 역할을 하고 있다.

# 콜스택
- 자바스크립트는 싱글 쓰레드 프로그래밍 언어이다. 그 말은 콜스택이 하나라는 뜻이다. 때문에 한 번에 하나의 일만 할 수 있다.
- 콜스택은 우리가 프로그램의 어디에 있는지를 기록하는 자료구조이다.
- 코드에서 함수가 실행되는 순간 해당 함수는 이 스택의 제일 위로 올라가게 된다. 함수의 코드가 끝나고 종료되면 스택의 가장 윗부분이 제거 된다.
```javascript
  function multiply(x, y) {
    return x * y;
  }
  
  function printSquare(x) {
    var s = multiply(x, x);
    console.log(s);
  }
  
  printSquare(5);
```
- 엔진이 이 코드의 수행을 시작할 때는 콜스택이 비어있는 상태다.
![콜스택](https://github.com/juuunobae/TIL/blob/main/Javascript/%E1%84%8F%E1%85%A9%E1%86%AF%E1%84%89%E1%85%B3%E1%84%90%E1%85%A2%E1%86%A8.png)
- 콜스택의 각각은 스택프레임(Stack Frame)이라고 부른다.

# 동시성과 이벤트 루프
- 콜스택에 수행할 함수가 있으면 브라우저는 아무것도 할 수 없다. `블록킹`되는 것이다. 브라우저는 렌더링을 할 수도 없고 다른 코드를 수행할 수도없는 상황이 된다. 
- 또 다른 문제는 브라우저는 콜스택 내의 많은 작업을 수행하면서 꽤 긴 시간동안 응답이 없을 수도 있다. 그러면 대부분의 브라우저에서 에러를 일으킨다.
- 브라우저가 응답없음 상태에 빠지게 하지 않으면서 무거운 코드를 실행하려면 비동기콜백 코드를 작성한다.
