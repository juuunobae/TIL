# 쿠키와 세션을 사용하는 이유
### HTTP 프로토콜의 특징이자 약점을 보완하기 위해 사용한다.

# HTTP 프로토콜의 특징
## 비연결지향(Connectionless)
- http는 클라이언트가 요청(request)를 서버로 보내면, 서버는 클라이언트에게 적절한 응답(response)를 해주고 `연결(connection)을 끊는 특성`이 있다.

## 상태없음(Stateless)
- 연결을 끊는 순간 클리이언트와 서버의 통신이 끝나며 `상태 정보는 유지하지 않는특성`이 있다.

> http는 이 두가지 특성을 보완하기 위해 `세션(session)`과 `쿠키(cookie)`를 사용한다.
> 비연결지향의 특성은 커넥션을 계속 유지하지 않기 때문에 서버리소스 낭비가 줄어들어 큰 장접이지만, 통신할 때마다 새로 커넥션을 만들기 때문에 클라이언트 측면에서는 상태를 유지하기위해 통신할 때마다 어떤 절차를 가져야 한다는 단점이 생긴다.
> 어떤 페이지에서 다른 어떤 페이지로 넘어갈 때마다 인증을 다시 받아야 하는 것이다.

# 쿠키(Cookie)
- 클라이언트 `로컬(Local)`에 저장되는 `키와 값(key, value)`이 들어있는 작은 데이터 파일이다.
- 이름, 값, 만료날짜, 경로 정보가 들어가있다.
- 일정시간동안 데이터를 저장할 수 있다. (로그인 상태 유지에 활용)
- 클라이언트의 상태정보를 로컬에 저장했다가 참조한다.
- 클라이언트가 따로 요청하지 않아도 브라우저가 request시 request header를 넣어서 자동으로 서버에 전송한다.

## 제한
- 클라이언트에 300개까지 저장할 수 있다.
- 하나의 도메인당 20개의 값만 가질 수 있다.
- 하나의 쿠키값은  4KB까지 저장할 수 있다.

## 동작
1. 클라이언트가 페이지를 요청한다.
2. 웹 서버는 쿠키를 생성하고, 생성한 쿠키에 정보를 담아 HTTP화면을 응답할 때 같이 돌려준다.
3. 쿠키를 받은 클라이언트는 가지고 있다가 다시 서버에 요청할 때 요청과 쿠키를 전송한다.

# 세션(Session)
- 쿠키를 기반으로 하고 있지만, 쿠키와 달리 서버측에서 사용자 정보 파일을 관리한다.
- 서버에서 클라이언트를 구분하기 위해 session ID를 부여하며 브라우저가 서버에 접속해서 브라우저를 종료할 때까지 인증상태를 유지한다.
- 접속 시간에 제한을 두고 일정 시간동안 응답이 없으면 세션을 끊도록 설정이 가능하다.
- 클라이언트가 서버에 접속 시 session ID를 발급하고, 클라이언트는 쿠키에 session ID를 저장한다.
- 서버에 다시 접속시 쿠키를 이용해서 session ID값을 서버에 전달한다.

## 특징
- 각 클라이언트에게 고유 ID를 부여
- session ID로 클라이언트를 구분해서 클라이언트의 요구에 맞는 서비스를 제공
- 쿠키보다 보안이 우수하다.

## 동작
1. 클라이언트가 페이지를 요청한다.
2. 서버는 클라이언트이 request header 필드이 쿠키를 확인하여, 해당 session ID를 보냈는지 확인한다.
3. session ID가 존재하지 않으면 session ID를 생성해 클라이언트에게 응답한다.
4. 클라이언트는 서버에서 받은 session ID를 쿠키를 사용해 저장한다.
