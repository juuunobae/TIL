# 프로세스란

## 프로그램
- 프로그램 자체에는 생명이 없다.
- 저장장치에 저장되어 실행되기를 기다리고 있는 코드(명령어)와 정적인 데이터의 묶음이다.

## 프로세스
- 코드(명령어)와 정적인 데이터가 메모리에 적재되어 실행되면 프로세스가 된다.
- 프로스세란 실행되고 있는 프로그램이다.

# 여러 프로세스가 동시에 실행되는 원리
- 우리에게 스마트폰이나 컴퓨터로 음악을 들어면서 웹서핑을 하고, 게임을 하면서 메시지를 보는 게 당연한 일이다.
- 하나의 CPU는 한 순간에 하나의 프로세스만 실행할 수 있기에 때문에 이 상황들은 놀라운 일이다.

## 어떻게 동시에 실행되는 느낌을 주는가
- 운영체제가 엄청나게 빠르게 CPU가 실행할 프로세스를 교체하고 있기 때문이다.

# 프로세스의 구성
- 프로세스에 대한 정보는 프로세스 제어블록 또는 프로세스 기술자라고 부르는 자료구조에 저장된다.
- PCB (Process Control Block) or (Process Descriptor)

## PID
- 운영체제가 각 프로세스를 식별하기 위해 부여된 프로세스 식별번호(Process IDentification)
## 프로세스 상태
- 실행중이거나 대기중인 프로세스의 상태를 저장
## 프로그램 카운터
- CPU가 프로세스를 처리하기 위해 실행할 다음 명령어(기계어)가 저장된 메모리 주소를 가리키는 값
## 스케줄링 우선순위
- 운영체제가 CPU에서 실행될 여러개의 프로세스들의 우선순위를 결정하는 것
## 권한
- 프로세스가 접근할 수 있는 자원을 결정하는 정보
## 프로세스의 부모와 자식 프로세스
- 모든 프로세스는 부모 프로세스를 복제해서 생성되고 이 계층관계는 트리를 형성한다.
- 그래서 각 프로세스는 자식 프로세스와 부모 프로세스에 대한 정보를 가지공 있다.
## 프로세스의 데이터와 명령어가 있는 메모리 위치를 가리키는 포인터
- 실행중인 프로그램인 프로세스는 프로그램에 대한 정보를 가지고 있어야 하고, 그 정보는 프로세스가 메모리에 가지는 자신만의 주소공간에 저장 된다.
- 이 공간에 대한 포인터 값을 가진다.
## 실행문맥
- 프로세스가 실행상태에서 마지막으로 실행한 프로세서의 레시스터 내용을 담고 있다.
- CPU에 의해 실행된 프로세스는 운영체제에 의해 계속 교체되는데 교체되었다가 다시 자신의 차례가 되어서 실행될 때 중단된 적 없고 마치 연속적으로 실행된 것처럼 하기 위해 이 레스트 정보를 가지고 있다.

# 프로세스가 접근 할 수 있는 메모리 공간
- 프로세스의 데이터와 명령어가 있는 메모리 위치를 가리키는 포인터
  - Text 
    - Instruction : 기계어
  - Data
    - 초기화된 전역 변수, static 변수
  - BSS 
    - 초기화되지 않은 전역 변수, static 변수
  - Heap
    - malloc으로 동적 할당된 변수
  - Stack
    - 지역 변수(중괄호 안에서 선언된 변수)
> 컴파일 타임에 지역변수를 얼마나 사용할지 미리 계산할 수 없기 때문에 런타임에 지역변수 선언 순서에 따라 스택영역은 위쪽으로 주소 값을 매기고 동적 할당될 때 힙영역은 아래쪽으로 주소값을 매깁니다.

# 프로세스 관리
- 운영체제는 프로세스들의 실행 사이에 프로세스를 교체하고 재시작할 때 오류가 발생하지 않도록 관리해야 한다.
- 이를 위해 운영체제는 프로세스의 상태를 실행, 준비, 블록 상태로 분류하고 프로세스들을 상태전이를 통해 체계적으로 관리합니다.
1. 사용자가 프로그램을 실행하면 프로세스가 생성되고 준비리스트에 추가된다.
2. 프로세스는 프로세서(CPU)가 사용가능한 상태가 되면 CPU를 할당 받는다.
  - 준비상태에서 실행상태로 상태전이가 된다.
  - 이 과정을 디스패칭이라고 하고 디스패터가 이 일을 수행한다.
3. 프로세스는 CPU를 이용해 연산한 후 CPU를 자발적으로 반납하고 작업이 끝나지 않았으면 다시 준비상태에 들어간다.
4. 다시 준비리스트의 첫번째에 있는 프로세스를 실행상태로 바꾸고 이 과정을 반복합니다.
> 운영체제는 프로세스가 CPU를 자발적으로 반납하지 않고 독점하는 경우를 방지하기 위해 하드웨어적으로 인터럽팅 클럭을 주기적으로 발생시켜 프로세스가 특정 시간 간격동안만 실행할 수 있도록 합니다. 인터럽팅 클럭이 발생되면 강제로 실행중인 프로세스의 CPU제어권을 운영체제에게 빼앗기고 프로세스는 준비상태로 전이 된다.
